"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[691],{3521:function(e,n,r){r.d(n,{c:function(){return C}});var t=r(9439),i=r(7888),s=r(1082),o=r(7309),l=r(1503),c=r(7128),a=r(8792),d=r(2266),u=r(6106),p=r(914),h=r(2441),m=r(9529),x=r.p+"static/media/\u041f\u0440\u043e\u0435\u043a\u0442.2b2801ddcb9d929c5b27.png",f=r(1087),j=r(2791),Z=r(6309),g=r(9085),y=r(3153),v=r(2177),w=r(184),b=i.Z.Meta,C=function(e){var n,r,C,I,k=e.item,P=e.refetch,S=(0,y.C)(v.dy).user,E=(0,Z.Vx)(),F=(0,t.Z)(E,2),A=F[0],N=F[1],L=N.isError,q=N.error,z=(0,Z.L0)(),D=(0,t.Z)(z,2),M=D[0],R=D[1],T=R.isError,_=R.error,O=(0,Z.U7)(),U=(0,t.Z)(O,1)[0],G=(0,Z.a6)(),V=(0,t.Z)(G,1)[0],X=(0,j.useState)(100),B=(0,t.Z)(X,2),W=B[0],H=B[1],J=(0,j.useState)(!1),K=(0,t.Z)(J,2),Q=K[0],Y=K[1],$=function(e){A({contentId:e}).then((function(){P()}))};if((0,j.useEffect)((function(){L&&g.Am.error(q.data.message,{position:"top-right"})}),[L]),(0,j.useEffect)((function(){T&&g.Am.error(_.data.message,{position:"top-right"})}),[T]),!S)return null;var ee=function(e){return(0,w.jsx)(w.Fragment,{children:"ADMIN"===S.role?(0,w.jsx)(s.Z,{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",placement:"bottom",onConfirm:function(){return n=e.id,void V({userId:n,contestsId:k.id}).then((function(){P()}));var n},description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?"})}),children:(0,w.jsx)(o.ZP,{type:"link",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})},e.id):null})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(i.Z,{style:{width:240},cover:(0,w.jsx)("img",{src:x}),children:[(0,w.jsx)(b,{title:k.name}),"\u0410\u0432\u0442\u043e\u0440: ",null===(n=k.users[0])||void 0===n?void 0:n.name,(0,w.jsx)("br",{}),"\u041a\u0432\u043e\u0442\u0430: ",null===(r=k.users)||void 0===r?void 0:r.length,"/",k.workers,(0,w.jsx)("br",{}),(0,w.jsx)(o.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return Y(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),"ADMIN"===S.role?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,w.jsx)(s.Z,{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",placement:"bottom",onConfirm:function(){return e=k.id,void U({id:e}).then((function(){P()}));var e},description:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442?"})}),children:(0,w.jsx)(o.ZP,{style:{width:"100%",color:"black"},type:"dashed",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]}):null]}),(0,w.jsxs)(l.Z,{width:1024,title:k.name,centered:!0,open:Q,footer:null,onCancel:function(){return Y(!1)},children:[(0,w.jsx)(c.Z,{}),(0,w.jsxs)("p",{children:["\u0410\u0432\u0442\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",null===(C=k.users[0])||void 0===C?void 0:C.name]}),(0,w.jsxs)("p",{children:["\u041a\u0432\u043e\u0442\u0430 \u043b\u044e\u0434\u0435\u0439: ",null===(I=k.users)||void 0===I?void 0:I.length,"/",k.workers]}),(0,w.jsxs)("p",{children:["\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432: ",0==k.rating.rating?"\u041d\u0435\u0442\u0443":k.rating.rating]}),(0,w.jsxs)("p",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",(0,w.jsx)("pre",{children:k.description})]}),(0,w.jsx)("p",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435:"}),(0,w.jsx)(a.ZP,{dataSource:null===k||void 0===k?void 0:k.users,renderItem:function(e,n){return(0,w.jsx)(a.ZP.Item,{actions:[(0,w.jsx)(ee,{id:e.id})],children:(0,w.jsx)(a.ZP.Item.Meta,{avatar:(0,w.jsx)(d.C,{shape:"square",icon:(0,w.jsx)(m.Z,{})}),title:e.name,description:e.email})})}}),(0,w.jsxs)(u.Z,{gutter:16,justify:"space-between",children:[(0,w.jsx)(p.Z,{flex:"auto",children:k.users.length>=k.workers?(0,w.jsx)(o.ZP,{style:{width:"100%"},disabled:!0,type:"primary",onClick:function(){return $(k.id)},children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f"}):(0,w.jsx)(o.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return $(k.id)},children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f"})}),(0,w.jsx)(p.Z,{flex:"auto",children:"EXPERT"==S.role||"ADMIN"==S.role?(0,w.jsx)(s.Z,{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0448\u0430\u0433",placement:"bottom",onConfirm:function(){return e=k.id,void M({contestId:e,rate:W}).then((function(){P()}));var e},description:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442!"}),(0,w.jsx)(h.Z,{value:W,onChange:H,min:0,max:100,formatter:function(e){return"".concat(e)}})]}),children:(0,w.jsx)(o.ZP,{style:{width:"100%"},type:"primary",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})}):null}),(0,w.jsx)(p.Z,{flex:"auto",children:(0,w.jsx)(f.rU,{target:"_blank",to:"http://45.12.73.150:5000/".concat(k.fileName),children:(0,w.jsx)(o.ZP,{style:{width:"100%"},type:"default",onClick:function(){return Y(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})})})]})]})]})}},539:function(e,n,r){r.r(n);var t=r(1413),i=r(9439),s=r(7615),o=r(6090),l=r(6988),c=r(860),a=r(6106),d=r(914),u=r(5925),p=r(1503),h=r(6005),m=r(2441),x=r(7309),f=r(4099),j=r(3521),Z=r(6309),g=r(9286),y=r(2351),v=r(2791),w=r(306),b=r(9085),C=r(184);n.default=function(){var e=(0,v.useState)(!1),n=(0,i.Z)(e,2),r=n[0],I=n[1],k=(0,v.useState)(1),P=(0,i.Z)(k,2),S=P[0],E=P[1],F=(0,v.useState)([]),A=(0,i.Z)(F,2),N=A[0],L=A[1],q=s.Z.useForm(),z=(0,i.Z)(q,1)[0],D=o.Z.useNotification(),M=(0,i.Z)(D,2),R=(M[0],M[1],(0,Z._X)({limit:"8",page:"".concat(S)})),T=R.data,_=R.isSuccess,O=R.refetch,U=(0,Z.BD)(),G=(0,i.Z)(U,2),V=G[0],X=G[1],B=X.isError,W=X.error;v.useEffect((function(){B&&b.Am.error(W.data.message),_&&O()}),[B,_]);var H={beforeUpload:function(e){var n="image/png"===e.type||"image/jpeg"===e.type||"application/msword"===e.type||"text/plain"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||"application/pdf"===e.type,r=e.size/1024/1024<1;return n?!r&&(l.ZP.error("\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 200 \u043c\u0435\u0433\u0430\u0431\u0430\u0439\u0442"),c.Z.LIST_IGNORE):(l.ZP.error("\u042d\u0442\u043e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e: .png, .jpeg, .doc, .docx, .pdf \u0444\u043e\u0440\u043c\u0430\u0442\u044b! "),c.Z.LIST_IGNORE)}};return(0,C.jsxs)("div",{style:{maxWidth:1024},children:[(0,C.jsxs)(a.Z,{justify:"space-around",style:{width:"100%"},gutter:[16,16],children:[_?T.rows.map((function(e){return(0,C.jsx)(d.Z,{style:{width:"320px"},xs:{span:16},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:6},children:(0,C.jsx)(j.c,{item:e,refetch:O},e.id)},e.name)})):null,(0,C.jsx)(u.Z,{icon:(0,C.jsx)(g.Z,{}),shape:"circle",tooltip:(0,C.jsx)("div",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"}),onClick:function(){return I(!0)}}),(0,C.jsx)(p.Z,{width:1024,title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",centered:!0,open:r,footer:null,onCancel:function(){return I(!1)},children:(0,C.jsxs)(s.Z,{form:z,layout:"vertical",onFinish:function(e){var n,r=new FormData;r.append("f",null===(n=N[0])||void 0===n?void 0:n.originFileObj),r.append("name",e.name),r.append("description",e.description),r.append("workers",e.workers),V(r).then((function(){I(!1),O()})).catch((function(e){b.Am.error(e.data.message)}))},children:[(0,C.jsx)(s.Z.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",name:"name",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,C.jsx)(h.Z,{})}),(0,C.jsx)(s.Z.Item,{label:"\u041a\u0432\u043e\u0442\u0430:",name:"workers",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,C.jsx)(m.Z,{min:1,max:100,formatter:function(e){return"0/".concat(e)}})}),(0,C.jsx)(s.Z.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",name:"description",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,C.jsx)(w.Z,{autoSize:{minRows:4,maxRows:8},maxLength:2e3,showCount:!0})}),(0,C.jsx)(s.Z.Item,{name:"file",valuePropName:"file",getValueFromEvent:function(e){return Array.isArray(e)?e.slice(-1):e&&e.fileList.slice(-1)},label:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,C.jsx)(c.Z,(0,t.Z)((0,t.Z)({},H),{},{maxCount:1,fileList:N,onChange:function(e){var n=e.fileList;return L(n)},children:(0,C.jsx)(x.ZP,{icon:(0,C.jsx)(y.Z,{}),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})}))}),(0,C.jsx)(s.Z.Item,{children:(0,C.jsx)(x.ZP,{htmlType:"submit",type:"primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})})]}),(0,C.jsx)(a.Z,{justify:"center",style:{marginTop:"8px"},children:(0,C.jsx)(f.Z,{defaultPageSize:8,pageSize:8,showSizeChanger:!1,current:S,onChange:function(e){E(e),O()},total:_?T.count:0})})]})}}}]);
//# sourceMappingURL=691.29f467f5.chunk.js.map