{"version":3,"file":"static/js/691.29f467f5.chunk.js","mappings":"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","sources":["components/Item/Item.tsx","pages/Projects/Projects.tsx"],"sourcesContent":["import avatar from \"../../assets/Avatar.png\";\nimport { Avatar, Button, Card, Col, Divider, InputNumber, List, Modal, Popconfirm, Row } from 'antd';\nimport { ProjectTwoTone, UserOutlined } from '@ant-design/icons';\nimport mainProjectLogo from '../../assets/Проект.png';\nimport { Link } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { useAddRateMutation, useAddUserMutation, useDeleteProjMutation, useDeleteUserProjMutation } from \"../../redux/api/projectsApi\";\nimport { toast } from \"react-toastify\";\nimport { useAppSelector } from \"../../redux/hooks\";\nimport { selectUser } from \"../../redux/features/userSlice\";\nconst { Meta } = Card;\n\nexport const Item = ({ item, refetch }) => {\n\tconst { user } = useAppSelector(selectUser);\n\tconst [addUser, { isError: isErrorUser, error: errorUser }] = useAddUserMutation();\n\tconst [addRate, { isError: isErrorRate, error: errorRate }] = useAddRateMutation();\n\tconst [delProj] = useDeleteProjMutation();\n\tconst [delUserProj] = useDeleteUserProjMutation();\n\tconst [rate, setRate] = useState< string | number | null>(100);\n\tconst [modalOpen, setModalOpen] = useState(false);\n\tconst onClick = (contentId: string) => {\n\t\taddUser({contentId})\n\t\t.then(()=>{\n\t\t\trefetch()\n\t\t})\n\t};\n\n\tconst onRateClick = (contestId: string) => {\n\t\taddRate({ contestId, rate })\n\t\t.then(()=>{\n\t\t\trefetch()\n\t\t})\n\t};\n\tconst onDelete = (id: string) => {\n\t\tdelProj({id})\n\t\t\t.then(() => {\n\t\t\t\trefetch()\n\t\t\t})\n\t};\n\tconst onUserDelete = (userId: number) => {\n\t\tdelUserProj({userId: userId, contestsId: item.id})\n\t\t\t.then(() => {\n\t\t\t\trefetch()\n\t\t\t})\n\t};\n\tuseEffect(() => {\n\t\tif (isErrorUser) {\n\t\t\ttoast.error((errorUser as any).data.message, {\n\t\t\t\tposition: 'top-right',\n\t\t\t  });\n\t\t\n\t\t}\n\n\t  }, [isErrorUser]);\n\t  useEffect(() => {\n\t\tif (isErrorRate) {\n\t\t\ttoast.error((errorRate as any).data.message, {\n\t\t\t\tposition: 'top-right',\n\t\t\t  });\n\t\t\n\t\t}\n\n\t  }, [isErrorRate]);\n\t  if (!user) {\n\t\treturn null;\n\t}\n\nconst DeleteUserButton = (id) => {\n\treturn (<>\n\t\t{user.role === \"ADMIN\" ? \n\t\t\t\n\t\t\t\t<Popconfirm\n\t\t\t\t\tkey={id.id}\n\t\t\t\t\ttitle=\"Удаление\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\tonConfirm={() => onUserDelete(id.id)}\n\t\t\t\t\tdescription={<>\n\t\t\t\t\t\t<p>Вы точно хотите удалить этого пользователя?</p>\n\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Button type=\"link\" >Удалить</Button>\n\t\t\t\t</Popconfirm> \n\t\t\t : null}\n\t\t\t</>\n\t)\n}\n\n\treturn <>\n\n\t\t<Card\n\t\t\tstyle={{ width: 240 }}\n\t\t\tcover={<img src={mainProjectLogo}/>}\n\t\t>\n\t\t\t<Meta title={item.name} />\n\t\t\tАвтор: {item.users[0]?.name}<br />\n\t\t\tКвота: {item.users?.length}/{item.workers}<br />\n\t\t\t<Button style={{ width: \"100%\" }} type=\"primary\" onClick={() => setModalOpen(true)}>\n\t\t\t\tОткрыть\n\t\t\t</Button>{user.role === \"ADMIN\" ? \n\t\t\t<>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t<Popconfirm\n\t\t\t\t\ttitle=\"Удаление\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\tonConfirm={() => onDelete(item.id)}\n\t\t\t\t\tdescription={<>\n\t\t\t\t\t\t<p>Вы точно хотите удалить этот проект?</p>\n\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Button style={{ width: \"100%\", color: \"black\" }} type=\"dashed\">\n\t\t\t\t\t\tУдалить\n\t\t\t\t\t</Button>\n\t\t\t\t</Popconfirm> \n\t\t\t</> : null}\n\t\t</Card>\n\t\t<Modal\n\t\t\twidth={1024}\n\t\t\ttitle={item.name}\n\t\t\tcentered\n\t\t\topen={modalOpen}\n\t\t\tfooter={null}\n\t\t\tonCancel={() => setModalOpen(false)}\n\t\t>\n\t\t\t<Divider />\n\t\t\t<p>Автор проекта: {item.users[0]?.name}</p>\n\t\t\t<p>Квота людей: {item.users?.length}/{item.workers}</p>\n\t\t\t<p>Средняя оценка экспертов: {item.rating.rating == 0 ? \"Нету\" : item.rating.rating}</p>\n\t\t\t<p>Описание проекта: <pre>{item.description}</pre></p>\n\t\t\t<p>Пользователи находящиеся в проекте:</p>\n\t\t\t<List\n        dataSource={item?.users}\n        renderItem={(item: {id: number, name: string, email: string}, index) => (\n          <List.Item\n\t\t  actions={[<DeleteUserButton id={item.id}/>]}\n\t\t  >\n\t\t\t<List.Item.Meta\n              avatar={\n                <Avatar shape=\"square\" icon={<UserOutlined />} />\n              }\n              title={item.name}\n              description={item.email}\n            />\n          </List.Item>\n        )}\n      />\n\t\t\t<Row gutter={16} justify={\"space-between\"}>\n\t\t\t\t<Col flex=\"auto\">\n\t\t\t\t{item.users.length >= item.workers ? <Button style={{ width: \"100%\" }} disabled type=\"primary\"  onClick={() => onClick(item.id)}>\n\t\t\t\t\tПрисоединится\n\t\t\t\t</Button> : <Button style={{ width: \"100%\" }} type=\"primary\"  onClick={() => onClick(item.id)}>\n\t\t\t\t\tПрисоединится\n\t\t\t\t</Button>}\n\t\t\t\t\t</Col>\n\t\t\t\t<Col flex=\"auto\">\n\t\t\t\t\t{user.role == 'EXPERT' || user.role == 'ADMIN' ? <Popconfirm\n\t\t\t\t\t\ttitle=\"Последний шаг\"\n\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\tonConfirm={()=> onRateClick(item.id)}\n\t\t\t\t\t\tdescription={<>\n\t\t\t\t\t\t<p>Пожалуйста оцените проект!</p>\n\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\tvalue={rate}\n\t\t\t\t\t\t\t\tonChange={setRate}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\tformatter={(value) => `${value}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</> \n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button style={{ width: \"100%\" }} type=\"primary\" >\n\t\t\t\t\t\t\tОценить проект\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Popconfirm> : null}\n\t\t\t\t</Col>\n\t\t\t\t<Col flex=\"auto\" >\n\t\t\t\t\t<Link target=\"_blank\" to={`http://45.12.73.150:5000/${item.fileName}`}><Button style={{ width: \"100%\" }} type=\"default\" onClick={() => setModalOpen(true)}>\n\t\t\t\t\tОткрыть карточку проекта\n\t\t\t\t</Button></Link>\n\t\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</Modal>\n\t</>;\n};\n","import { Button, Col, FloatButton, Form, Input, InputNumber, Modal, Pagination, PaginationProps, Row, Upload, UploadProps, message, notification } from \"antd\";\nimport { Item } from \"../../components/Item\";\nimport { useCreateProjectMutation, useGetAllProjectsQuery } from \"../../redux/api/projectsApi\";\nimport { PlusOutlined, UploadOutlined } from '@ant-design/icons';\nimport React, { useEffect, useState } from \"react\";\nimport TextArea from \"antd/es/input/TextArea\";\nimport { NotificationPlacement } from \"antd/es/notification/interface\";\nimport { toast } from \"react-toastify\";\n\n\n\n\nconst Projects = () => {\n\n\tconst [modalOpen, setModalOpen] = useState(false);\n\tconst [current, setCurrent] = useState(1);\n\tconst [fileList, setFileList] = useState([]);\n\tconst [form] = Form.useForm();\n\tconst [api, contextHolder] = notification.useNotification();\n\tconst { data, isSuccess, refetch } = useGetAllProjectsQuery({ limit: '8', page: `${current}` })\n\tconst [createProject, { isError, error }] = useCreateProjectMutation();\n\tconst onChange = (page) => {\n\t\tsetCurrent(page);\n\t\trefetch()\n\t};\n\tconst onFinishModal = (values: any) => {\n\t\tconst formData = new FormData();\n\t\tformData.append(\"f\", fileList[0]?.originFileObj);\n\t\tformData.append(\"name\", values.name);\n\t\tformData.append(\"description\", values.description);\n\t\tformData.append(\"workers\", values.workers);\n\n\t\t\n\t\tcreateProject(formData)\n\t\t  .then(() => {\n\t\t\tsetModalOpen(false);\n\t\t\trefetch();\n\t\t  })\n\t\t  .catch((error) => {\n\t\t\ttoast.error(error.data.message);\n\t\t  });\n\t  };\n\n\tReact.useEffect(() => {\n\t\tif (isError) {\n\t\t\ttoast.error((error as any).data.message)\n\t\t}\n\t\tif (isSuccess) {\n\t\t\trefetch()\n\t\t}\n\t}, [isError, isSuccess])\n\n\tconst props: UploadProps = {\n\t\tbeforeUpload: (file) => {\n\t\t  const isAllowType = file.type === 'image/png' || file.type === 'image/jpeg' || file.type === 'application/msword' || file.type === 'text/plain' || file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || file.type === 'application/pdf' ;\n\t\t  const isLt200M = file.size / 1024 / 1024 < 1;\n\t\t  if (!isAllowType) {\n\t\t\tmessage.error(`Этот загрузчик поддерживает только: .png, .jpeg, .doc, .docx, .pdf форматы! `);\n\t\t\treturn Upload.LIST_IGNORE;\n\t\t  }\n\t\t  if (!isLt200M) {\n\t\t\tmessage.error(`Размер файла не может превышать 200 мегабайт`);\n\t\t\treturn Upload.LIST_IGNORE;\n\t\t  }\n\t\t  return false;\n\t\t},\n\t  };\n\n\tconst normFile = (e) => {\n\t\tif (Array.isArray(e)) {\n\t\t\treturn e.slice(-1);\n\t\t}\n\t\treturn e && e.fileList.slice(-1);\n\t};\n\n\treturn <div style={{ maxWidth: 1024 }}>\n\t\t<Row justify=\"space-around\" style={{ width: \"100%\" }} gutter={[16, 16]}>\n\t\t\t{isSuccess ?\n\t\t\t\tdata.rows.map((item) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Col style={{ width: \"320px\" }} key={item.name} xs={{ span: 16 }} sm={{ span: 12 }} md={{ span: 8 }} lg={{ span: 6 }} xl={{ span: 6 }} >\n\t\t\t\t\t\t\t<Item key={item.id} item={item} refetch={refetch} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t);\n\t\t\t\t}) :\n\t\t\t\tnull}\n\n\t\t\t<FloatButton\n\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\tshape=\"circle\"\n\t\t\t\ttooltip={<div>Создать проект</div>}\n\t\t\t\tonClick={() => setModalOpen(true)}\n\t\t\t/>\n\t\t\t<Modal\n\t\t\t\twidth={1024}\n\t\t\t\ttitle=\"Создание проекта\"\n\t\t\t\tcentered\n\t\t\t\topen={modalOpen}\n\t\t\t\tfooter={null}\n\t\t\t\tonCancel={() => setModalOpen(false)}\n\t\t\t>\n\n\t\t\t\t<Form\n\t\t\t\t\tform={form}\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonFinish={onFinishModal}\n\t\t\t\t>\n\t\t\t\t\t<Form.Item label=\"Название проекта:\" name=\"name\" rules={[{ required: true, message: 'Пожалуйста заполните поле!' }]} >\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item label=\"Квота:\" name=\"workers\" rules={[{ required: true, message: 'Пожалуйста заполните поле!' }]} >\n\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\tformatter={(value) => `0/${value}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<Form.Item\n\t\t\t\t\t\tlabel=\"Описание проекта:\"\n\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\trules={[{ required: true, message: 'Пожалуйста заполните поле!' }]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\tautoSize={{ minRows: 4, maxRows: 8 }}\n\t\t\t\t\t\t\tmaxLength={2000}\n\t\t\t\t\t\t\tshowCount\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item name=\"file\"\n\t\t\t\t\t\tvaluePropName=\"file\"\n\t\t\t\t\t\tgetValueFromEvent={normFile}\n\t\t\t\t\t\tlabel=\"Карточка проекта\" rules={[{ required: true, message: 'Пожалуйста заполните поле!' }]} >\n\t\t\t\t\t\t<Upload {...props}  maxCount={1} fileList={fileList} onChange={({ fileList }) => setFileList(fileList)}>\n\t\t\t\t\t\t\t<Button icon={<UploadOutlined />}>Загрузить карточку проекта</Button>\n\t\t\t\t\t\t</Upload>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t<Button htmlType=\"submit\" type=\"primary\">Создать</Button>\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t</Row>\n\t\t<Row justify=\"center\" style={{ marginTop: \"8px\" }}>\n\t\t\t<Pagination defaultPageSize={8} pageSize={8} showSizeChanger={false} current={current} onChange={onChange} total={isSuccess ? data.count : 0} />\n\t\t</Row>\n\n\t</div>;\n};\nexport default Projects;"],"names":["Meta","Card","Item","_ref","_item$users$","_item$users","_item$users$2","_item$users2","item","refetch","user","useAppSelector","selectUser","_useAddUserMutation","useAddUserMutation","_useAddUserMutation2","_slicedToArray","addUser","_useAddUserMutation2$","isErrorUser","isError","errorUser","error","_useAddRateMutation","useAddRateMutation","_useAddRateMutation2","addRate","_useAddRateMutation2$","isErrorRate","errorRate","_useDeleteProjMutatio","useDeleteProjMutation","delProj","_useDeleteUserProjMut","useDeleteUserProjMutation","delUserProj","_useState","useState","_useState2","rate","setRate","_useState3","_useState4","modalOpen","setModalOpen","onClick","contentId","then","useEffect","toast","data","message","position","DeleteUserButton","id","_jsx","_Fragment","children","role","Popconfirm","title","placement","onConfirm","userId","contestsId","description","Button","type","_jsxs","style","width","cover","src","mainProjectLogo","name","users","length","workers","color","Modal","centered","open","footer","onCancel","Divider","rating","List","dataSource","renderItem","index","actions","avatar","Avatar","shape","icon","UserOutlined","email","Row","gutter","justify","Col","flex","disabled","contestId","InputNumber","value","onChange","min","max","formatter","concat","Link","target","to","fileName","current","setCurrent","_useState5","_useState6","fileList","setFileList","_Form$useForm","Form","form","_notification$useNoti","notification","_notification$useNoti2","_useGetAllProjectsQue","useGetAllProjectsQuery","limit","page","isSuccess","_useCreateProjectMuta","useCreateProjectMutation","_useCreateProjectMuta2","createProject","_useCreateProjectMuta3","React","props","beforeUpload","file","isAllowType","isLt200M","size","Upload","maxWidth","rows","map","xs","span","sm","md","lg","xl","FloatButton","PlusOutlined","tooltip","layout","onFinish","values","_fileList$","formData","FormData","append","originFileObj","catch","label","rules","required","Input","TextArea","autoSize","minRows","maxRows","maxLength","showCount","valuePropName","getValueFromEvent","e","Array","isArray","slice","_objectSpread","maxCount","UploadOutlined","htmlType","marginTop","Pagination","defaultPageSize","pageSize","showSizeChanger","total","count"],"sourceRoot":""}