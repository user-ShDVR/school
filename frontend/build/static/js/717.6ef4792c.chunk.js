"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[717],{3521:function(e,n,r){r.d(n,{c:function(){return A}});var t=r(1413),i=r(9439),s=r(7888),o=r(6090),a=r(7615),l=r(1082),c=r(7309),d=r(6988),u=r(1463),m=r(1503),p=r(6005),h=r(2441),x=r(7128),f=r(8792),j=r(2266),Z=r(6106),g=r(914),y=r(2351),v=r(9529),w=r.p+"static/media/\u041f\u0440\u043e\u0435\u043a\u0442.2b2801ddcb9d929c5b27.png",b=r(1087),C=r(2791),P=r(6309),k=r(9085),I=r(3153),F=r(2177),S=r(306),E=r(184),N=s.Z.Meta,A=function(e){var n,r,A,L,T=e.userProject,q=e.item,z=e.refetch,M=(0,I.C)(F.dy).user,R=(0,P.Vx)(),V=(0,i.Z)(R,2),D=V[0],U=V[1],G=U.isError,O=U.error,_=(0,P.L0)(),K=(0,i.Z)(_,2),W=K[0],X=K[1],B=X.isError,H=X.error,J=(0,P.KT)(),Q=(0,i.Z)(J,2),Y=Q[0],$=Q[1],ee=($.isError,$.error,o.Z.useNotification()),ne=(0,i.Z)(ee,2),re=(ne[0],ne[1],(0,P.U7)()),te=(0,i.Z)(re,1)[0],ie=(0,P.a6)(),se=(0,i.Z)(ie,1)[0],oe=(0,C.useState)(100),ae=(0,i.Z)(oe,2),le=ae[0],ce=ae[1],de=(0,C.useState)(!1),ue=(0,i.Z)(de,2),me=ue[0],pe=ue[1],he=(0,C.useState)(!1),xe=(0,i.Z)(he,2),fe=xe[0],je=xe[1],Ze=(0,C.useState)([{uid:"0",name:"".concat(q.fileName),status:"done",url:"http://31.129.96.5:5000/".concat(q.fileName),thumbUrl:"http://31.129.96.5:5000/".concat(q.fileName)}]),ge=(0,i.Z)(Ze,2),ye=ge[0],ve=ge[1],we=a.Z.useForm(),be=(0,i.Z)(we,1)[0],Ce=function(e){D({contentId:e}).then((function(){z()}))};if((0,C.useEffect)((function(){G&&k.Am.error(O.data.message,{position:"top-right"})}),[G]),(0,C.useEffect)((function(){B&&k.Am.error(H.data.message,{position:"top-right"})}),[B]),!M)return null;var Pe=function(e){return(0,E.jsx)(E.Fragment,{children:"ADMIN"===M.role&&!1===T?(0,E.jsx)(l.Z,{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",placement:"bottom",onConfirm:function(){return n=e.id,void se({userId:n,contestsId:q.id}).then((function(){z()}));var n},description:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("p",{children:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?"})}),children:(0,E.jsx)(c.ZP,{type:"link",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})},e.id):null})},ke={beforeUpload:function(e){var n="image/png"===e.type||"image/jpeg"===e.type||"application/msword"===e.type||"text/plain"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||"application/pdf"===e.type,r=e.size/1024/1024<1;return n?!r&&(d.ZP.error("\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 200 \u043c\u0435\u0433\u0430\u0431\u0430\u0439\u0442"),u.Z.LIST_IGNORE):(d.ZP.error("\u042d\u0442\u043e\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e: .png, .jpeg, .doc, .docx, .pdf \u0444\u043e\u0440\u043c\u0430\u0442\u044b! "),u.Z.LIST_IGNORE)}},Ie=function(){return(0,E.jsx)(E.Fragment,{children:!0===T?(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(c.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return je(!0)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}):null})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(s.Z,{style:{width:240},cover:(0,E.jsx)("img",{src:w}),children:[(0,E.jsx)(N,{title:q.name}),"\u0410\u0432\u0442\u043e\u0440: ",null===(n=q.users[0])||void 0===n?void 0:n.name,(0,E.jsx)("br",{}),"\u041a\u0432\u043e\u0442\u0430: ",null===(r=q.users)||void 0===r?void 0:r.length,"/",q.workers,(0,E.jsx)("br",{}),(0,E.jsxs)("p",{children:["\u041e\u0446\u0435\u043d\u043a\u0430 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432: ",0==q.rating.rating?"\u041d\u0435\u0442":q.rating.rating]}),(0,E.jsx)(c.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return pe(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),"ADMIN"===M.role&&!1===T?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)(l.Z,{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",placement:"bottom",onConfirm:function(){return e=q.id,void te({id:e}).then((function(){z()}));var e},description:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("p",{children:"\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442?"})}),children:(0,E.jsx)(c.ZP,{style:{width:"100%",color:"black"},type:"dashed",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]}):null,(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),(0,E.jsx)(Ie,{})]}),(0,E.jsx)(m.Z,{width:1024,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",centered:!0,open:fe,footer:null,onCancel:function(){return je(!1)},children:(0,E.jsxs)(a.Z,{form:be,layout:"vertical",onFinish:function(e){var n,r=new FormData;r.append("f",null===(n=ye[0])||void 0===n?void 0:n.originFileObj),r.append("id",q.id),r.append("name",e.name),r.append("description",e.description),r.append("workers",e.workers),Y(r).then((function(){je(!1),z()})).catch((function(e){k.Am.error(e.data.message)}))},children:[(0,E.jsx)(a.Z.Item,{initialValue:q.name,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",name:"name",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,E.jsx)(p.Z,{})}),(0,E.jsx)(a.Z.Item,{initialValue:q.workers,label:"\u041a\u0432\u043e\u0442\u0430:",name:"workers",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,E.jsx)(h.Z,{min:1,max:100,formatter:function(e){return"0/".concat(e)}})}),(0,E.jsx)(a.Z.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:",name:"description",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],initialValue:q.description,children:(0,E.jsx)(S.Z,{autoSize:{minRows:4,maxRows:8},maxLength:2e3,showCount:!0})}),(0,E.jsx)(a.Z.Item,{name:"file",valuePropName:"file",getValueFromEvent:function(e){return Array.isArray(e)?e.slice(-1):e&&e.fileList.slice(-1)},label:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,E.jsx)(u.Z,(0,t.Z)((0,t.Z)({},ke),{},{maxCount:1,fileList:ye,onChange:function(e){var n=e.fileList;return ve(n)},children:(0,E.jsx)(c.ZP,{icon:(0,E.jsx)(y.Z,{}),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})}))}),(0,E.jsx)(a.Z.Item,{children:(0,E.jsx)(c.ZP,{htmlType:"submit",type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}),(0,E.jsxs)(m.Z,{width:1024,title:q.name,centered:!0,open:me,footer:null,onCancel:function(){return pe(!1)},children:[(0,E.jsx)(x.Z,{}),(0,E.jsxs)("p",{children:["\u0410\u0432\u0442\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",null===(A=q.users[0])||void 0===A?void 0:A.name]}),(0,E.jsxs)("p",{children:["\u041a\u0432\u043e\u0442\u0430 \u043b\u044e\u0434\u0435\u0439: ",null===(L=q.users)||void 0===L?void 0:L.length,"/",q.workers]}),(0,E.jsxs)("p",{children:["\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432: ",0==q.rating.rating?"\u041d\u0435\u0442":q.rating.rating]}),(0,E.jsxs)("p",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",(0,E.jsx)("pre",{children:q.description})]}),(0,E.jsx)("p",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435:"}),(0,E.jsx)(f.ZP,{dataSource:null===q||void 0===q?void 0:q.users,renderItem:function(e,n){return(0,E.jsx)(f.ZP.Item,{actions:[(0,E.jsx)(Pe,{id:e.id})],children:(0,E.jsx)(f.ZP.Item.Meta,{avatar:(0,E.jsx)(j.C,{shape:"square",icon:(0,E.jsx)(v.Z,{})}),title:e.name,description:e.email})})}}),(0,E.jsxs)(Z.Z,{gutter:16,justify:"space-between",children:[(0,E.jsx)(g.Z,{flex:"auto",children:q.users.length>=q.workers?(0,E.jsx)(c.ZP,{style:{width:"100%"},disabled:!0,type:"primary",onClick:function(){return Ce(q.id)},children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f"}):(0,E.jsx)(c.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return Ce(q.id)},children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0441\u044f"})}),(0,E.jsx)(g.Z,{flex:"auto",children:"EXPERT"==M.role&&0==T||"ADMIN"==M.role&&0==T?(0,E.jsx)(l.Z,{title:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0448\u0430\u0433",placement:"bottom",onConfirm:function(){return e=q.id,void W({contestId:e,rate:le}).then((function(){z()}));var e},description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("p",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442!"}),(0,E.jsx)(h.Z,{value:le,onChange:ce,min:0,max:100,formatter:function(e){return"".concat(e)}})]}),children:(0,E.jsx)(c.ZP,{style:{width:"100%"},type:"primary",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})}):null}),(0,E.jsx)(g.Z,{flex:"auto",children:(0,E.jsx)(b.rU,{target:"_blank",to:"http://31.129.96.5:5000/".concat(q.fileName),children:(0,E.jsx)(c.ZP,{style:{width:"100%"},type:"default",onClick:function(){return pe(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"})})})]})]})]})}},1251:function(e,n,r){r.r(n);var t=r(9439),i=r(7615),s=r(6090),o=r(6106),a=r(914),l=r(4099),c=r(3521),d=r(6309),u=r(2791),m=r(9085),p=r(184);n.default=function(){var e=(0,u.useState)(!1),n=(0,t.Z)(e,2),r=(n[0],n[1],(0,u.useState)(1)),h=(0,t.Z)(r,2),x=h[0],f=h[1],j=i.Z.useForm(),Z=((0,t.Z)(j,1)[0],s.Z.useNotification()),g=(0,t.Z)(Z,2),y=(g[0],g[1],(0,d.Gj)({limit:"8",page:"".concat(x)})),v=y.data,w=y.isSuccess,b=y.refetch,C=y.isError,P=y.error;return u.useEffect((function(){C&&m.Am.error(P.data.message)}),[C]),(0,p.jsxs)("div",{style:{maxWidth:1024},children:[(0,p.jsx)(o.Z,{justify:"space-around",style:{width:"100%"},gutter:[16,16],children:w?v.rows.map((function(e){return(0,p.jsx)(a.Z,{style:{width:"320px"},xs:{span:16},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:6},children:(0,p.jsx)(c.c,{userProject:!0,item:e,refetch:b},e.id)},e.name)})):null}),(0,p.jsx)(o.Z,{justify:"center",style:{marginTop:"8px"},children:(0,p.jsx)(l.Z,{defaultPageSize:8,pageSize:8,showSizeChanger:!1,current:x,onChange:function(e){f(e),b()},total:w?v.count:0})})]})}}}]);
//# sourceMappingURL=717.6ef4792c.chunk.js.map